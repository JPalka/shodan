# frozen_string_literal: true

require 'rails_helper'

RSpec.describe GetBuildingConfig do
  let(:client) { double }
  let(:browser) { double }
  let(:subject) { described_class.new(client) }
  let(:input) do
    { config: { 'xmlns' => '',
                'main' =>
        { 'max_level' => '30',
          'min_level' => '1',
          'wood' => '90',
          'stone' => '80',
          'iron' => '70',
          'pop' => '5',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '257.1428571',
          'build_time_factor' => '1.2' },
                'barracks' =>
        { 'max_level' => '25',
          'min_level' => '0',
          'wood' => '200',
          'stone' => '170',
          'iron' => '90',
          'pop' => '7',
          'wood_factor' => '1.26',
          'stone_factor' => '1.28',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '514.2857143',
          'build_time_factor' => '1.2' },
                'stable' =>
        { 'max_level' => '20',
          'min_level' => '0',
          'wood' => '270',
          'stone' => '240',
          'iron' => '260',
          'pop' => '8',
          'wood_factor' => '1.26',
          'stone_factor' => '1.28',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '1714.285714',
          'build_time_factor' => '1.2' },
                'garage' =>
        { 'max_level' => '15',
          'min_level' => '0',
          'wood' => '300',
          'stone' => '240',
          'iron' => '260',
          'pop' => '8',
          'wood_factor' => '1.26',
          'stone_factor' => '1.28',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '1714.285714',
          'build_time_factor' => '1.2' },
                'snob' =>
        { 'max_level' => '1',
          'min_level' => '0',
          'wood' => '15000',
          'stone' => '25000',
          'iron' => '10000',
          'pop' => '80',
          'wood_factor' => '2',
          'stone_factor' => '2',
          'iron_factor' => '2',
          'pop_factor' => '1.17',
          'build_time' => '167657.1429',
          'build_time_factor' => '1.2' },
                'smith' =>
        { 'max_level' => '20',
          'min_level' => '0',
          'wood' => '220',
          'stone' => '180',
          'iron' => '240',
          'pop' => '20',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '1714.285714',
          'build_time_factor' => '1.2' },
                'place' =>
        { 'max_level' => '1',
          'min_level' => '0',
          'wood' => '10',
          'stone' => '40',
          'iron' => '30',
          'pop' => '0',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '3102.857143',
          'build_time_factor' => '1.2' },
                'statue' =>
        { 'max_level' => '1',
          'min_level' => '0',
          'wood' => '220',
          'stone' => '220',
          'iron' => '220',
          'pop' => '10',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '428.5714286',
          'build_time_factor' => '1.2' },
                'market' =>
        { 'max_level' => '25',
          'min_level' => '0',
          'wood' => '100',
          'stone' => '100',
          'iron' => '100',
          'pop' => '20',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '771.4285714',
          'build_time_factor' => '1.2' },
                'wood' =>
        { 'max_level' => '30',
          'min_level' => '0',
          'wood' => '50',
          'stone' => '60',
          'iron' => '40',
          'pop' => '5',
          'wood_factor' => '1.25',
          'stone_factor' => '1.275',
          'iron_factor' => '1.245',
          'pop_factor' => '1.155',
          'build_time' => '257.1428571',
          'build_time_factor' => '1.2' },
                'stone' =>
        { 'max_level' => '30',
          'min_level' => '0',
          'wood' => '65',
          'stone' => '50',
          'iron' => '40',
          'pop' => '10',
          'wood_factor' => '1.27',
          'stone_factor' => '1.265',
          'iron_factor' => '1.24',
          'pop_factor' => '1.14',
          'build_time' => '257.1428571',
          'build_time_factor' => '1.2' },
                'iron' =>
        { 'max_level' => '30',
          'min_level' => '0',
          'wood' => '75',
          'stone' => '65',
          'iron' => '70',
          'pop' => '10',
          'wood_factor' => '1.252',
          'stone_factor' => '1.275',
          'iron_factor' => '1.24',
          'pop_factor' => '1.17',
          'build_time' => '308.5714286',
          'build_time_factor' => '1.2' },
                'farm' =>
        { 'max_level' => '30',
          'min_level' => '1',
          'wood' => '45',
          'stone' => '40',
          'iron' => '30',
          'pop' => '0',
          'wood_factor' => '1.3',
          'stone_factor' => '1.32',
          'iron_factor' => '1.29',
          'pop_factor' => '1',
          'build_time' => '342.8571429',
          'build_time_factor' => '1.2' },
                'storage' =>
        { 'max_level' => '30',
          'min_level' => '1',
          'wood' => '60',
          'stone' => '50',
          'iron' => '40',
          'pop' => '0',
          'wood_factor' => '1.265',
          'stone_factor' => '1.27',
          'iron_factor' => '1.245',
          'pop_factor' => '1.15',
          'build_time' => '291.4285714',
          'build_time_factor' => '1.2' },
                'hide' =>
        { 'max_level' => '10',
          'min_level' => '0',
          'wood' => '50',
          'stone' => '60',
          'iron' => '50',
          'pop' => '2',
          'wood_factor' => '1.25',
          'stone_factor' => '1.25',
          'iron_factor' => '1.25',
          'pop_factor' => '1.17',
          'build_time' => '514.2857143',
          'build_time_factor' => '1.2' },
                'wall' =>
        { 'max_level' => '20',
          'min_level' => '0',
          'wood' => '50',
          'stone' => '100',
          'iron' => '20',
          'pop' => '5',
          'wood_factor' => '1.26',
          'stone_factor' => '1.275',
          'iron_factor' => '1.26',
          'pop_factor' => '1.17',
          'build_time' => '1028.571429',
          'build_time_factor' => '1.2' } } }
  end

  let(:expected_output) { input[:config] }
  include_examples 'action'
end
